<script type="text/javascript" src="{lib file=uploader.js}" charset="utf-8"></script>
<script type="text/javascript">
var _d = DialogManager.get('config_dialog');
_d.setWidth(350);
_d.setPosition('center');
$('#add_image').click(function(){
    $fileLen = $('.fileImg').length;
    $(this).before('<div class="field_item fileImg">' +
        '<label>上传图片:(<span>支持 gif|jpg|jpeg|png 格式, 490px * 210px（或其他尺寸）</span>)</label>' +
        '<p><div id="filePicker'+$fileLen+'">选择图片</div><input type="hidden" name="ad_image_url[]" id="ad_image_url'+$fileLen+'" value="" /></p>'+
        '<p id="fileList'+$fileLen+'"></p>' +
        '<label>图片标题:</label>' +
        '<p style="overflow:hidden;"><input type="text" name="re_title_url[]" value="{$image.re_title_url}" />' +
        '<label>链接地址:</label>' +
        '<p style="overflow:hidden;"><input type="text" name="re_link_url[]" value="{$image.re_link_url}" />' +
        '<input type="button" value="删除图片" onclick="drop_image(this)" /></p></div>');
        uploadImg('fileList'+$fileLen,'filePicker'+$fileLen,'ad_image_url'+$fileLen,30,30);
});
function drop_image(btnObj)
{
    $(btnObj).parents('.field_item').remove();
}
</script>
<div style="height:500px;overflow:scroll;">
<!--    <div class="field_item">
        <label>模块名称:</label>
        <p><input type="text" name="model_name" value="{$options.model_name}" /></p>
    </div>-->
    <div class="field_item">
    <label>最大图片数量为8张，图片会按照顺序排列显示</label>
    </div>
    <!-- {if $options.re_images} -->
    <!-- {foreach from=$options.re_images item=image key=key} -->
    <div class="field_item fileImg">
        <label>上传图片:(<span>支持 gif|jpg|jpeg|png 格式, 490px * 210px（或其他尺寸）</span>)</label>
        <p><div id="filePicker{$key}">选择图片</div><input type="hidden" name="re_image_url[]" id="re_image_url{$key}" value="{$image.re_image_url}" /></p>
        <p id="fileList{$key}"><img src="{$image.re_image_url}" height="30" /></p>
        <label>图片标题:</label>
        <p style="overflow:hidden;"><input type="text" name="re_title_url[]" value="{$image.re_title_url}" /></p>
        <label>链接地址:</label>
        <p style="overflow:hidden;"><input type="text" name="re_link_url[]" value="{$image.re_link_url}" />
        <input  type="button" value="删除图片" onclick="drop_image(this)" /></p>
    </div>
    <!-- {/foreach} -->
    <!-- {else} -->
    <div class="field_item fileImg">
        <label>上传图片:(<span>支持 gif|jpg|jpeg|png 格式  490px * 210px（或其他尺寸）</span>)</label>
        <p><div id="filePicker0">选择图片</div><input type="hidden" name="re_image_url[]" id="re_image_url0" value="" /></p>
        <p id="fileList0"></p>    
        <label>图片标题:</label>
        <p style="overflow:hidden;"><input type="text" name="re_title_url[]" value="{$image.re_title_url}" /></p>
        <label>链接地址:</label>
        <p style="overflow:hidden;"><input type="text" name="re_link_url[]" value="{$image.re_link_url}" />
        <input type="button" value="删除图片" onclick="drop_image(this)" /></p>
    </div>
    <!-- {/if} -->
    <input type="button" id="add_image" value="新增图片" />
</div>
<script type="text/javascript">
    $(function(){
        <!--{if $options.re_images}-->
        <!-- {foreach from=$options.re_images item=image key=key} -->
        uploadImg('fileList{$key}','filePicker{$key}','re_image_url{$key}',30,30);
        <!-- {/foreach} -->
        <!--{else}-->
        uploadImg('fileList0','filePicker0','re_image_url0',30,30);
        <!-- {/if} -->
    });
</script>